<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:jeda-core="http://www.springframework.org/schema/jeda-core"
       xmlns:flexlow-core="http://java.sun.com/xml/ns/javaee"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd

        http://www.springframework.org/schema/jeda-core http://www.springframework.org/schema/jeda-core.xsd">


    <jeda-core:stage id="teststage" path="protocol/AggregatorBillingProtocolStage" transacted="true">
        <jeda-core:event-processor>
            <bean class="ru.kwanza.pcentre.StartPaymentProcessor" abstract="true"/>
        </jeda-core:event-processor>
        <jeda-core:resource-controller>
            <jeda-core:static-resource-controller threadCount="4" batchSize="1000"/>
        </jeda-core:resource-controller>
        <jeda-core:queue>
            <jeda-core:tx-priority-memory-queue maxSize="100000"/>
        </jeda-core:queue>
        <jeda-core:thread-manager>
            <jeda-core:stage-thread-manager maxIdleTimeout="10000"/>
        </jeda-core:thread-manager>
    </jeda-core:stage>


    <jeda-core:stage id="teststage" path="protocol/AggregatorBillingProtocolStage" transacted="true">
        <jeda-core:event-processor>
            <bean class="ru.kwanza.pcentre.StartPaymentProcessor" abstract="true"/>
        </jeda-core:event-processor>
        <jeda-core:resource-controller>
            <jeda-core:static-resource-controller threadCount="4" batchSize="1000"/>
        </jeda-core:resource-controller>
        <jeda-core:queue>
            <jeda-persistentqueue:jdbc-queue maxSize="100000"
                                                 idColumnName="id"
                                                 dataColumnName="name"
                                                 tableName="MyEvents"/>
        </jeda-core:queue>
        <jeda-core:thread-manager>
            <jeda-core:stage-thread-manager maxIdleTimeout="10000"/>
        </jeda-core:thread-manager>
    </jeda-core:stage>


    <jeda-core:flow-bus ref="beanId" path="payment/ObtainParams"/>
    <jeda-core:flow-bus class="ru.kwanza.pcentre.card.ObtainParams" path="payment/ObtainParams"/>

    <flexlow-core:timer ref="timer" path="MyTimer"/>
    <jeda-timer:jdbc-stage-timer/>
    <jeda-timer:berkeley-timer/>
    <jeda-timer:timer>
        <jeda-timer:persistent-controller ref="dafasdf"/>
    </jeda-timer:timer>

    <jeda-core:context ref="context" path="TwoPhaseTrx"/>

    <jeda-context:jdbc-blob-context path="TwoPhaseTrx"/>
    <jeda-context:jdbc-lightwieght-context path="TwoPhaseTrx"/>
    <jeda-context:berkeley-blob-context path="TwoPhaseTrx"/>

    <jeda-core:shared-thread-manager id="protocolThreadManager" maxThreadCount="100" idleTimeout="100"/>


</beans>