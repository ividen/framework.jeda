package ru.kwanza.jeda.core.resourcecontroller;

/**
 * @author Guzanov Alexander
 */
public class TestStaticResourceController/* extends TestCase */ {
//
//    public void testInputRate() throws InterruptedException {
//        StaticResourceController controller = new StaticResourceController();
//        assertEquals("Wrong batchSize", 1000, controller.getBatchSize());
//        assertEquals("Wrong threadCount", 4, controller.getThreadCount());
//        controller.setBatchSize(1);
//        controller.setThreadCount(1);
//        assertEquals("Wrong batchSize", 1, controller.getBatchSize());
//        assertEquals("Wrong threadCount", 1, controller.getThreadCount());
//        assertTrue(controller.getRate() >= 0.0);
//        assertTrue(controller.getRate() <= 0.0000001);
//
//        for (int i = 0; i < 10; i++) {
//            controller.input(10);
//            System.out.println(controller.getRate());
//            assertTrue(controller.getRate() >= 10);
//            assertTrue(controller.getRate() <= 10);
//            Thread.sleep(100);
//        }
//        controller.input(10);
//        System.out.println(controller.getRate());
//        assertTrue(controller.getRate() <= 85);
//        assertTrue(controller.getRate() >= 70);
//        Thread.sleep(1000);
//        for (int i = 0; i < 10; i++) {
//            controller.input(10);
//            System.out.println(controller.getRate());
//            assertTrue(controller.getRate() >= 28);
//            assertTrue(controller.getRate() <= 35);
//            Thread.sleep(100);
//        }
//
//        controller.input(10);
//        System.out.println(controller.getRate());
//        assertTrue(controller.getRate() <= 85);
//        assertTrue(controller.getRate() >= 70);
//
//    }
//
//
//    public void testThrouputRate() throws InterruptedException {
//        StaticResourceController controller = new StaticResourceController();
//        assertEquals("Wrong batchSize", 1000, controller.getBatchSize());
//        assertEquals("Wrong threadCount", 4, controller.getThreadCount());
//        controller.setBatchSize(1);
//        controller.setThreadCount(1);
//        assertEquals("Wrong batchSize", 1, controller.getBatchSize());
//        assertEquals("Wrong threadCount", 1, controller.getThreadCount());
//        assertTrue(controller.getRate() >= 0.0);
//        assertTrue(controller.getRate() <= 0.0000001);
//
//        for (int i = 0; i < 10; i++) {
//            controller.throughput(10, controller.getBatchSize(), 10, false);
//            System.out.println(controller.getRate());
//            assertTrue(controller.getRate() >= 10);
//            assertTrue(controller.getRate() <= 10);
//            Thread.sleep(100);
//        }
//        controller.throughput(10, controller.getBatchSize(), 10, false);
//        System.out.println(controller.getRate());
//        assertTrue(controller.getRate() <= 85);
//        assertTrue(controller.getRate() >= 70);
//        Thread.sleep(1000);
//        for (int i = 0; i < 10; i++) {
//            controller.throughput(10, controller.getBatchSize(), 10, false);
//            System.out.println(controller.getRate());
//            assertTrue(controller.getRate() >= 28);
//            assertTrue(controller.getRate() <= 35);
//            Thread.sleep(100);
//        }
//
//        controller.throughput(10, controller.getBatchSize(), 10, false);
//        System.out.println(controller.getRate());
//        assertTrue(controller.getRate() <= 85);
//        assertTrue(controller.getRate() >= 70);
//
//    }
//

}
